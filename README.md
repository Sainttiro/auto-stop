# Auto-Stop: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–æ–ø-–ª–æ—Å—Å–∞–º–∏ –∏ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–∞–º–∏

[![Version](https://img.shields.io/badge/version-v2.0.10-blue.svg)](https://github.com/Sainttiro/auto-stop/releases/tag/v2.0.10)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![Docker](https://img.shields.io/badge/docker-ready-blue.svg)](https://www.docker.com/)

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏ –ø–µ—Ä–µ—Å—á–µ—Ç–∞ —Å—Ç–æ–ø-–ª–æ—Å—Å–æ–≤ –∏ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–æ–≤ –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Å–¥–µ–ª–æ–∫ —á–µ—Ä–µ–∑ Tinkoff Invest API (gRPC).

> **‚ö†Ô∏è –í–ê–ñ–ù–û**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Å–∏—é **v2.0.10+**. –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –ø–æ—Ç–µ—Ä—è–º. –°–º. [–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è](docs/CRITICAL_FIXES.md).

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ SL/TP –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏
- ‚úÖ –ü–µ—Ä–µ—Å—á–µ—Ç —É—Ä–æ–≤–Ω–µ–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ —Ä–∞—Å—á–µ—Ç–∞ –¥–ª—è –∞–∫—Ü–∏–π –∏ —Ñ—å—é—á–µ—Ä—Å–æ–≤
- ‚úÖ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç —Å —á–∞—Å—Ç–∏—á–Ω—ã–º –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤** (v2.0.9+)
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞–∫—Ü–∏–π –≤ –ª–æ—Ç—ã** (v2.0.0+)
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞ –ø–æ–∑–∏—Ü–∏–π** (v1.2.0+)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ **–ú—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç—ã —Å –≥–æ—Ä—è—á–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º** üî• [–ü–æ–¥—Ä–æ–±–Ω–µ–µ](docs/MULTI_ACCOUNTS.md)
- ‚úÖ –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ YAML-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –¢–æ—Ä–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (v2.0.1+)

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ SQLite –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å gRPC-–ø–æ—Ç–æ–∫–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–∞—Ö (–¥–æ 100 –ø–æ–ø—ã—Ç–æ–∫)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram
- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –¥–µ–ø–ª–æ–µ–º

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –∫ Tinkoff Invest API
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/yourusername/auto-stop.git
cd auto-stop
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:
```bash
cp .env.example .env
```

4. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`, –¥–æ–±–∞–≤–∏–≤ —Ç–æ–∫–µ–Ω Tinkoff API –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞:
```
TINKOFF_TOKEN=your_tinkoff_token_here
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here
```

5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Ñ–∞–π–ª–∞—Ö `config/config.yaml` –∏ `config/instruments.yaml`

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config/config.yaml`)

```yaml
api:
  token_env: "TINKOFF_TOKEN"  # –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å —Ç–æ–∫–µ–Ω–æ–º API
  app_name: "AutoStopSystem"
  
default_settings:
  stocks:
    stop_loss_pct: 2.0        # 2% —Å—Ç–æ–ø-–ª–æ—Å—Å
    take_profit_pct: 5.0      # 5% —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç
  futures:
    stop_loss_pct: 2.0        # 2% —Å—Ç–æ–ø-–ª–æ—Å—Å (–Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ - –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)
    take_profit_pct: 5.0      # 5% —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç (–Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ - –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)
    stop_loss_steps: 10       # 10 —à–∞–≥–æ–≤ —Ü–µ–Ω—ã (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
    take_profit_steps: 30     # 30 —à–∞–≥–æ–≤ —Ü–µ–Ω—ã (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

multi_take_profit:
  enabled: false              # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–µ–Ω–æ
  levels:
    - level_pct: 1.0          # +1% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
      volume_pct: 25          # –ó–∞–∫—Ä—ã—Ç—å 25% –ø–æ–∑–∏—Ü–∏–∏
    - level_pct: 2.0          # +2% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
      volume_pct: 25          # –ó–∞–∫—Ä—ã—Ç—å 25% –ø–æ–∑–∏—Ü–∏–∏
    - level_pct: 3.0          # +3% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
      volume_pct: 50          # –ó–∞–∫—Ä—ã—Ç—å 50% –ø–æ–∑–∏—Ü–∏–∏

telegram:
  bot_token_env: "TELEGRAM_BOT_TOKEN"
  chat_id_env: "TELEGRAM_CHAT_ID"
  notifications:
    - trade_executed          # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å–¥–µ–ª–æ–∫
    - order_placed            # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –æ—Ä–¥–µ—Ä–æ–≤
    - stop_triggered          # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —Å—Ç–æ–ø–æ–≤
    - errors                  # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

logging:
  level: "INFO"               # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  file: "logs/system.log"     # –§–∞–π–ª –¥–ª—è –ª–æ–≥–æ–≤
  max_bytes: 10485760         # 10MB –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
  backup_count: 5             # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ —Ä–æ—Ç–∞—Ü–∏–∏

# ID —Å—á–µ—Ç–∞ –≤ Tinkoff Invest
account_id: ""                # –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–≤–æ–∏–º ID —Å—á–µ—Ç–∞
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (`config/instruments.yaml`)

```yaml
instruments:
  # –ê–∫—Ü–∏–∏
  SBER:
    type: stock
    stop_loss_pct: 1.5        # –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Å—Ç–æ–ø-–ª–æ—Å—Å 1.5%
    take_profit_pct: 4.0      # –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç 4%
    
  GAZP:
    type: stock
    stop_loss_pct: 2.5        # –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Å—Ç–æ–ø-–ª–æ—Å—Å 2.5%
    take_profit_pct: 6.0      # –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç 6%
    
  # –§—å—é—á–µ—Ä—Å—ã
  SiH5:  # –§—å—é—á–µ—Ä—Å –Ω–∞ USD/RUB
    type: futures
    stop_loss_pct: 1.0        # 1% —Å—Ç–æ–ø-–ª–æ—Å—Å (–Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ - –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)
    take_profit_pct: 2.5      # 2.5% —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç (–Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ - –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)
    multi_tp:                 # –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ TP
      enabled: true
      levels:
        - level_pct: 0.5      # +0.5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
          volume_pct: 30      # –ó–∞–∫—Ä—ã—Ç—å 30% –ø–æ–∑–∏—Ü–∏–∏
        - level_pct: 1.0      # +1% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
          volume_pct: 30      # –ó–∞–∫—Ä—ã—Ç—å 30% –ø–æ–∑–∏—Ü–∏–∏
        - level_pct: 1.5      # +1.5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
          volume_pct: 40      # –ó–∞–∫—Ä—ã—Ç—å 40% –ø–æ–∑–∏—Ü–∏–∏
          
  BRJ5:  # –§—å—é—á–µ—Ä—Å –Ω–∞ –Ω–µ—Ñ—Ç—å Brent (—Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
    type: futures
    stop_loss_steps: 20       # 20 —à–∞–≥–æ–≤ —Ü–µ–Ω—ã
    take_profit_steps: 50     # 50 —à–∞–≥–æ–≤ —Ü–µ–Ω—ã
```

## –ó–∞–ø—É—Å–∫

```bash
python -m src.main
```

–° —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—É—Ç–µ–π –∫ —Ñ–∞–π–ª–∞–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
python -m src.main --config path/to/config.yaml --instruments path/to/instruments.yaml
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **API Client** - –û–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ AsyncClient –∏–∑ invest-python –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
- **Stream Handler** - –û–±—Ä–∞–±–æ—Ç–∫–∞ gRPC-–ø–æ—Ç–æ–∫–æ–≤ (–∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Å–¥–µ–ª–æ–∫, –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π)
- **Position Manager** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏ –∏ —Ä–∞—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
- **Risk Calculator** - –†–∞—Å—á–µ—Ç —É—Ä–æ–≤–Ω–µ–π SL/TP
- **Order Executor** - –í—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏ –æ—Ç–º–µ–Ω–∞ –æ—Ä–¥–µ—Ä–æ–≤
- **–°—Ç—Ä–∞—Ç–µ–≥–∏–∏** - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- **Database** - –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ SQLite
- **Telegram Notifier** - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ YAML
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Tinkoff Invest API —á–µ—Ä–µ–∑ gRPC
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SQLite –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ –ë–î

2. **–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è**
   - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–æ—Ç–æ–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–π —Å–¥–µ–ª–æ–∫ (OrdersStreamService)
   - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π (OperationsStreamService)
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏**
   ```
   –°–æ–±—ã—Ç–∏–µ: –°–¥–µ–ª–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∞
   ‚Üì
   Position Manager: –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –∏ —Å—Ä–µ–¥–Ω—é—é —Ü–µ–Ω—É
   ‚Üì
   Risk Calculator: –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –Ω–æ–≤—ã–µ —É—Ä–æ–≤–Ω–∏ SL/TP
   ‚Üì
   Order Executor: –û—Ç–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ SL/TP (–µ—Å–ª–∏ –µ—Å—Ç—å)
   ‚Üì
   Order Executor: –í—ã—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ SL/TP
   ‚Üì
   Database: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   ‚Üì
   Telegram: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   ```

4. **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç**
   ```
   –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP —É—Ä–æ–≤–Ω—è 1:
   ‚Üì
   Multi-TP Strategy: –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –æ–±—ä–µ–º —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è
   ‚Üì
   Order Executor: –í—ã—Å—Ç–∞–≤–∏—Ç—å –æ—Ä–¥–µ—Ä –Ω–∞ —á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
   ‚Üì
   –ü–æ—Å–ª–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è:
   ‚Üì
   Position Manager: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ—Ç–æ–≤
   ‚Üì
   Risk Calculator: –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —É—Ä–æ–≤–Ω–∏
   ‚Üì
   Order Executor: –ü–µ—Ä–µ–≤—ã—Å—Ç–∞–≤–∏—Ç—å SL –∏ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è TP
   ```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [CHANGELOG.md](CHANGELOG.md) - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [docs/CRITICAL_FIXES.md](docs/CRITICAL_FIXES.md) - **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ö –ü–†–û–ß–¢–ï–ù–ò–Æ)**
- [docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md) - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- [docs/DEPLOYMENT.md](docs/DEPLOYMENT.md) - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [docs/MULTI_ACCOUNTS.md](docs/MULTI_ACCOUNTS.md) - –†–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—á–µ—Ç–∞–º–∏
- [docs/QUICKSTART.md](docs/QUICKSTART.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [docs/GITHUB_SETUP.md](docs/GITHUB_SETUP.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions
- [docs/TAILSCALE_SETUP.md](docs/TAILSCALE_SETUP.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Tailscale VPN

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### v2.0.10 (–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ datetime –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–¥–µ–ª–æ–∫
- ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### v2.0.9
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
- ‚ö†Ô∏è –†–∞–Ω–µ–µ: —Å–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—â–∞–ª–∞ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—É—é —á–∞—Å—Ç—å –æ—Ä–¥–µ—Ä–∞!

### v2.0.0
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞–∫—Ü–∏–π –≤ –ª–æ—Ç—ã
- ‚ö†Ô∏è –†–∞–Ω–µ–µ: –æ—Ä–¥–µ—Ä–∞ –≤—ã—Å—Ç–∞–≤–ª—è–ª–∏—Å—å –Ω–∞ 10x-100x –±–æ–ª—å—à–µ!

### v1.2.0
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞ –ø–æ–∑–∏—Ü–∏–π
- ‚ö†Ô∏è –†–∞–Ω–µ–µ: –º–æ–≥–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –Ω–µ–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ SHORT –ø–æ–∑–∏—Ü–∏–∏!

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [docs/CRITICAL_FIXES.md](docs/CRITICAL_FIXES.md)

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ v2.0.10+** - –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏ –æ–ø–∞—Å–Ω—ã!
2. **–°–∏—Å—Ç–µ–º–∞ –ù–ï –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –ø–æ–∑–∏—Ü–∏–∏** - —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Å—É–º–º–∞—Ö** –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ–π
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π
5. **–ù–µ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –±–µ–∑ –ø—Ä–∏—Å–º–æ—Ç—Ä–∞** –Ω–∞–¥–æ–ª–≥–æ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker –∏ Docker Compose
- Tinkoff Invest —Ç–æ–∫–µ–Ω
- Telegram –±–æ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Sainttiro/auto-stop.git
cd auto-stop

# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
git checkout v2.0.10

# –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª
cp .env.example .env
nano .env  # –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω—ã

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs -f
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [docs/QUICKSTART.md](docs/QUICKSTART.md)

## üìä Telegram –∫–æ–º–∞–Ω–¥—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ
- `/start` - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã
- `/status` - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
- `/positions` - –¢–µ–∫—É—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏
- `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (v2.0.1+)
- `/stats [–ø–µ—Ä–∏–æ–¥] [–≥–æ–¥]` - –¢–æ—Ä–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - –ü—Ä–∏–º–µ—Ä—ã: `/stats`, `/stats week`, `/stats month 2024`
- `/stats_instrument <ticker> [–ø–µ—Ä–∏–æ–¥]` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É
  - –ü—Ä–∏–º–µ—Ä—ã: `/stats_instrument SBER`, `/stats_instrument GAZP week`

### –ú—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç—ã (v1.1.0+)
- `/accounts` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤
- `/current_account` - –¢–µ–∫—É—â–∏–π –∞–∫—Ç–∏–≤–Ω—ã–π —Å—á–µ—Ç
- `/add_account <name> <token> <account_id> [–æ–ø–∏—Å–∞–Ω–∏–µ]` - –î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç
- `/switch_account <name>` - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å—á–µ—Ç (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞!)
- `/remove_account <name>` - –£–¥–∞–ª–∏—Ç—å —Å—á–µ—Ç

## üõ† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

### –ß–µ—Ä–µ–∑ Docker

```bash
# –ó–∞–ø—É—Å–∫
docker compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose restart

# –õ–æ–≥–∏
docker compose logs -f

# –°—Ç–∞—Ç—É—Å
docker compose ps
```

### –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
./scripts/logs.sh [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Å—Ç—Ä–æ–∫]

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
./scripts/update.sh

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
./scripts/backup.sh

# –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
./scripts/deploy.sh
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
- ‚úÖ –¢–æ–∫–µ–Ω—ã –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–æ–≤ –≤ –ë–î
- ‚úÖ .env –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ Git (.gitignore)
- ‚úÖ SSH –∫–ª—é—á–∏ –¥–ª—è GitHub Actions
- ‚úÖ Tailscale VPN –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É
- ‚ö†Ô∏è **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –¥–æ—Å—Ç—É–ø–µ!**

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°–∏—Å—Ç–µ–º–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é:**
   ```bash
   git describe --tags
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å v2.0.10 –∏–ª–∏ –≤—ã—à–µ
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   docker compose logs --tail=100
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:**
   ```bash
   docker compose ps
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: Up
   ```

4. **–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
   - [TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
   - [CRITICAL_FIXES.md](docs/CRITICAL_FIXES.md) - –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü–æ—è–≤–∏–ª–∏—Å—å SHORT –ø–æ–∑–∏—Ü–∏–∏?

**–°–†–û–ß–ù–û:**
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É: `docker compose down`
2. –ó–∞–∫—Ä–æ–π—Ç–µ SHORT –ø–æ–∑–∏—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Tinkoff
3. –û–±–Ω–æ–≤–∏—Ç–µ—Å—å –¥–æ v2.0.10: `git checkout v2.0.10`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É: `docker compose up -d`

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [docs/CRITICAL_FIXES.md](docs/CRITICAL_FIXES.md#v200---–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è-–∞–∫—Ü–∏–π-–≤-–ª–æ—Ç—ã)

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ó–∞–¥–µ—Ä–∂–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–¥–µ–ª–∫–∏:** < 1 —Å–µ–∫—É–Ω–¥–∞
- **–í—Ä–µ–º—è –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è SL/TP:** 1-2 —Å–µ–∫—É–Ω–¥—ã
- **–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ, –¥–æ 100 –ø–æ–ø—ã—Ç–æ–∫
- **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏:** 5-10 —Å–µ–∫—É–Ω–¥ (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞)
- **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏:** ~256MB (—Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è), –¥–æ 1GB (–ª–∏–º–∏—Ç)
- **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ CPU:** 0.5-2 —è–¥—Ä–∞

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è:
- –û—Ç—á–µ—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö (GitHub Issues)
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
- Pull requests —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã

## ‚öñÔ∏è –û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

**–í–ê–ñ–ù–û:**

- –≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–µ–Ω—å–≥–∞–º–∏
- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ù–ï –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫
- –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Å—É–º–º–∞—Ö
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã
- –ù–µ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –±–µ–∑ –ø—Ä–∏—Å–º–æ—Ç—Ä–∞

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

---

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** v2.0.10 (21.10.2025)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è (–≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** [GitHub Issues](https://github.com/Sainttiro/auto-stop/issues)
